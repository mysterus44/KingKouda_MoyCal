<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
  <meta name="theme-color" content="#00f" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Codystar:wght@300;400&family=Crete+Round:ital@0;1&family=Lora:ital,wght@0,400..700;1,400..700&family=Manrope:wght@200..800&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Orbitron:wght@400..900&family=Overpass:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Rowdies:wght@300;400;700&display=swap" rel="stylesheet">
  <title>KingKouda Calculateur de Moyenne de Classe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    header{
      max-width: 900px;
      max-height: 140px;
      margin: auto;
      background-color: #00f;
      padding: 5px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
  }

  body {
    font-family: Arial, sans-serif;
    background-color: rgba(0,0,0,0.7);
    padding: 2px;
    color: #00f;
  }
  h1{
    font-size: 30px;
    margin-top: -10px;
  }
  h1, h2 {
    text-align: center;
    color: #fff;
  }
  span{
    font-size: 20px;
      text-shadow: 2px 2px 2px rgba(15, 14, 14, 0.9);
      font-weight: bold;
  }
  #crea{
      color: orange;
  }
  
  .container {
    max-width: 900px;
    margin: auto;
    background-color: #fff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    margin-bottom: 30px;
  }
    #accueil{
        font-size: 15px;
        color: #fff;
        font-weight: bold;
        background-color: rgb(13, 13, 15);
        border: 2px solid #fff;
        border-radius: 10px;
        width: 200px;
        text-align: center;
    }
    #copyright{
      color: rgba(0,0,0,0.7);
      text-shadow: none;
      font-size: 15px;
    }
    .div-acc{
      max-width: 100%;
      border-radius: 10px;
      box-shadow: 0 0 1px rgba(0,0,0,0.1);
      display: block;
      text-align: center;
      margin: 30px;
    }
    input, button, select {
      padding: 10px;
      margin: 5px;
      width: 100%;
      box-sizing: border-box;
    }
    .section {
      margin-bottom: 30px;
    }
    button{
        font-size: 15px;
        color: #fff;
        font-weight: bold;
        background-color: #00f;
        border: 2px solid #fff;
        border-radius: 10px;
    }
    button:hover{
        color: #00f;
        background-color: #fff;
        border-color: #00f;
    }
    .resultat {
      background-color: #e0f7fa;
      padding: 20px;
      border-radius: 10px;
      white-space: pre-wrap;
    }
    a{
      display: block;
      color:#fff;
      font-size: 20px;
      font-weight: bold;
      text-decoration: none;
  }
  a:hover{
      color: #00f;
  }
    
  footer h3{
      text-align: center;
      font-size: 15px;
      color: #fff;
      text-shadow: 2px 2px 2px #00f;
      margin: auto;
      left: 0;
      width: 100%;
  }
  .reprendre{
    background-color: #fff;
    color: #00f;
    border: 3px solid #00f;
    border-radius: 10px;
    width: 200px;
    text-align: center;
  }
  .reprendre a{
    color: #00f;
  }
  .contact{
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    padding-left: 10px;
    padding-right: 10px;
  
    background-color: #000;
    text-align: center;
    border-radius: 20px;
    max-width: 900px;
}
#whats{
    width: 100%;
  }
#whats img{
    width: 50px;
    margin-left: 150px;
}
  </style>
</head>
<body>
  <header>
    <h1><span>KingKouda<span id="crea">Crea.</span></span></h1>
    <h1>Calculateur de Moyenne de Classe</h1>
</header>
    <div class="div-acc"><button id="accueil"><a href="index.html">Revenir</a></button></div>
  <div class="container">
    <h1>Calculateur de Moyenne Générale</h1>

    <div id="etape1">
      <label for="nbMatieres">Nombre de matières :</label>
      <input type="number" id="nbMatieres" min="1" />
      <button onclick="genererMatieres()">Suivant</button>
    </div>

    <form id="formulaireNotes" style="display:none;">
      <div id="zonesMatieres"></div>
      <button type="button" onclick="calculerMoyennes()">Calculer la moyenne</button>
    </form>

    <div id="resultat" class="resultat" style="display:none;">
    </div>
  </div>

  <script>
    

    function genererMatieres() {
      const nbMatieres = parseInt(document.getElementById("nbMatieres").value);
      const zones = document.getElementById("zonesMatieres");
      zones.innerHTML = '';
      if (!nbMatieres || nbMatieres < 1) return alert("Entrez un nombre valide de matières.");

      for (let i = 1; i <= nbMatieres; i++) {
        const div = document.createElement("div");
        div.className = "matiere";
        div.innerHTML = `
          <label>Matière ${i} - nombre de notes :</label>
          <input type="number" min="1" onchange="genererNotes(this, ${i})" id="notesMatiere${i}" />
          <div id="zoneNotes${i}" class="zone-notes"></div>
        `;
        zones.appendChild(div);
      }

      document.getElementById("formulaireNotes").style.display = "block";
    }

    function genererNotes(input, matiereIndex) {
      const nbNotes = parseInt(input.value);
      const zone = document.getElementById(`zoneNotes${matiereIndex}`);
      zone.innerHTML = '';

      if (!nbNotes || nbNotes < 1) return;

      for (let i = 1; i <= nbNotes; i++) {
        const noteInput = document.createElement("input");
        noteInput.type = "number";
        noteInput.min = "0";
        noteInput.max = "20";
        noteInput.placeholder = `Note ${i}`;
        noteInput.className = "note";
        zone.appendChild(noteInput);
      }
    }
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .then(reg => console.log("Service Worker enregistré avec succès :", reg))
          .catch(err => console.error("Erreur d'enregistrement du SW :", err));
      });
    }
    
    function calculerMoyennes() {
      const nbMatieres = parseInt(document.getElementById("nbMatieres").value);
      let sommeMoyennes = 0;
      let resultatHTML = "";

      for (let i = 1; i <= nbMatieres; i++) {
        const noteInputs = document.querySelectorAll(`#zoneNotes${i} input`);
        let total = 0;
        let nb = 0;

        noteInputs.forEach(input => {
          const val = parseFloat(input.value);
          if (!isNaN(val)) {
            total += val;
            nb++;
          }
        });

        if (nb === 0) {
          alert(`Vous devez entrer au moins une note pour la matière ${i}.`);
          return;
        }

        const moyenne = total / nb;
        sommeMoyennes += moyenne;
        resultatHTML += `Matière ${i} : ${moyenne.toFixed(2)}<br>`;
      }

      const moyenneGenerale = sommeMoyennes / nbMatieres;
      resultatHTML += `<hr><strong>Moyenne Générale :</strong> ${moyenneGenerale.toFixed(2)}`;
      const zoneResultat = document.getElementById("resultat");
      zoneResultat.innerHTML = resultatHTML;
      zoneResultat.style.display = "block";
    }
    
    if (moyenneGenerale<10) {
      alert('')
    }
    

  </script>
  <script>
  // Cacher le footer si le clavier mobile est actif
  const footer = document.querySelector("footer");

  window.addEventListener("resize", () => {
    // Si la hauteur de la fenêtre diminue brusquement, le clavier est probablement visible
    const isKeyboardVisible = window.innerHeight < screen.height - 150;

    if (isKeyboardVisible) {
      footer.style.display = "none";
    } else {
      footer.style.display = "block";
    }
  });
</script>

  <style>
    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%; /* tu peux changer la couleur si besoin */
      z-index: 1000;
      text-align: center;
      
    }
  
    .container2 {
      max-width: 900px;
      max-height: 120px;
      margin: auto;
      background-color: #fff;
      padding: 5px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
  
    body {
      padding-bottom: 120px; /* Pour éviter que le contenu ne soit caché derrière le footer */
    }
  </style>
  
  <footer> 
    <div class="container2">
      <div class="contact">
        <h3>L'infini Détermine Mon Potentiel</h3>
        <a id="whats" href="http://wa.me/2250586037221" target="_blank" rel="noopener noreferrer"><img src="whats.png" alt=""></a>
      </div>
      <div style="opacity: 0.5; margin: 20px 0;">
        <span id="copyright"></span>
      
        <script>
          const year = new Date().getFullYear();
          document.getElementById("copyright").innerHTML = `© ${year} KingKoudaCrea. Tous droits réservés.`;
        </script>
      </div>
    </div>
  </footer>
</body>
</html>
